<!DOCTYPE html>
<html>
<head>
  <title>TwitterClone</title>
  <%= stylesheet_link_tag    'application', media: 'all',
    'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application',
    'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>

<body>
  <% if signed_in? %>
    <%= render partial: 'layouts/header' %>
    <%= render partial: 'layouts/new_tweet' %>
  <% end %>

  <%= render partial: 'layouts/errors',
    locals: { errors: flash[:errors] } if flash[:errors] %>
  <%= render partial: 'layouts/notices',
    locals: { notices: flash[:notices] } if flash[:notices] %>

  <%= yield %>

  <script>
    $(document).ready(function(){
      $('#new-tweet').on('click', function(event) {
        event.preventDefault();
        $('#new-tweet-modal').removeClass('modal-off');
      });

      $('.new-tweet-modal-close').on('click', function(event) {
        event.preventDefault();
        $('#new-tweet-modal').addClass('modal-off');
        $('.new-tweet-textbox').val('');
      });

      window.currentUserId = <%= current_user.id %>;
      TwitterClone.initialize();
    });
  </script>
</body>
</html>
